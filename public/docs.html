<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini Swagger - uy-ladata</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

  <!-- Header mejorado -->
  <header class="bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow">
    <div class="max-w-6xl mx-auto flex justify-between items-center px-4 py-4">
      <h1 class="text-xl sm:text-2xl font-bold">USD.uy API</h1>

      <div class="flex items-center gap-3">
        <a href="/index.html" class="hidden sm:inline-block text-white hover:underline">üìÑ Principal</a>
        <a href="/link.html" class="hidden sm:inline-block text-white hover:underline">üíµ Promedio Bancario</a>
        <a href="mailto:api@usd.uy" class="hidden sm:inline-block text-white hover:underline">üìß Contacto</a>

        <!-- Bot√≥n Admin discreto -->
        <a href="/admin.html" class="ml-3 bg-white text-blue-600 px-3 py-1 text-sm rounded hover:bg-gray-100 transition">
          ‚öôÔ∏è Admin
        </a>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 sm:px-6 py-10">

    <h1 class="text-2xl sm:text-3xl font-bold text-blue-600 mb-8">Mini Swagger - uy-ladata API</h1>

    <div class="mb-10">
      <a href="/index.html" class="bg-gray-200 text-gray-700 px-4 py-2 rounded shadow hover:bg-gray-300 transition">
        ‚Üê Volver al Inicio
      </a>
    </div>

    <!-- /api/currency/{banco} -->
    <section class="mb-10">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1">üìà Cotizaci√≥n actualizada</h2>
      <p class="text-sm text-gray-500 mb-4">Real-time Currency Rate</p>

      <form onsubmit="event.preventDefault(); fetchBanco()" class="space-y-4">
        <div>
          <label class="font-semibold">Seleccionar Banco o Casa:</label>
          <select id="banco" class="w-full p-2 rounded border">
            <option value="itau">itau</option>
            <option value="alter">alter</option>
            <option value="aeromar">aeromar</option>
            <option value="delta">delta</option>
            <option value="gales">gales</option>
          </select>
          <p class="text-sm text-gray-500">No todas las fuentes est√°n disponibles para pruebas.</p>
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition">
          Consultar Cotizaci√≥n
        </button>
      </form>
      <pre id="banco-output" class="bg-gray-100 p-3 mt-3 rounded overflow-x-auto text-sm"></pre>
    </section>

    <!-- /api/convert -->
    <section class="mb-10">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1">üîÑ Conversi√≥n de divisas</h2>
      <p class="text-sm text-gray-500 mb-4">Currency conversion</p>

      <form onsubmit="event.preventDefault(); convertCurrency()" class="space-y-4">
        <div>
          <label class="font-semibold">Monto:</label>
          <input type="number" id="amount" value="100" required class="w-full p-2 rounded border" />
        </div>

        <div>
          <label class="font-semibold">De:</label>
          <select id="from" class="w-full p-2 rounded border">
            <option value="USD">USD</option>
            <option value="UYU">UYU</option>
          </select>
        </div>

        <div>
          <label class="font-semibold">A:</label>
          <select id="to" class="w-full p-2 rounded border">
            <option value="UYU">UYU</option>
            <option value="USD">USD</option>
          </select>
        </div>

        <div>
          <label class="font-semibold">Fuente:</label>
          <select id="source" class="w-full p-2 rounded border">
            <option value="itau">itau</option>
            <option value="alter">alter</option>
            <option value="aeromar">aeromar</option>
            <option value="delta">delta</option>
            <option value="gales">gales</option>
          </select>
          <p class="text-sm text-gray-500">No todas las fuentes est√°n disponibles para pruebas.</p>
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition">
          Convertir
        </button>
      </form>
      <pre id="convert-output" class="bg-gray-100 p-3 mt-3 rounded overflow-x-auto text-sm"></pre>
    </section>

    <!-- Fuel -->
    <section class="mb-10">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1">‚õΩ Consultar Precio de Combustible</h2>
      <p class="text-sm text-gray-500 mb-4">Fuel Price Query</p>

      <form onsubmit="event.preventDefault(); fetchFuel()" class="space-y-4">
        <div>
          <label class="font-semibold">Tipo de Combustible:</label>
          <select id="fuel" class="w-full p-2 rounded border">
            <option value="super95">Super 95</option>
            <option value="premium97">Premium 97</option>
            <option value="gasoil10">Gasoil 10 ppm</option>
            <option value="gasoil50">Gasoil 50 ppm</option>
            <option value="queroseno">Kerosene</option>
          </select>
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition">
          Consultar
        </button>
      </form>
      <pre id="fuel-output" class="bg-gray-100 p-3 mt-3 rounded overflow-x-auto text-sm"></pre>
    </section>

  </main>

  <footer class="text-center text-xs sm:text-sm text-gray-500 py-6">
    &copy; 2025 usd.uy ‚Äî hecho en Uruguay üá∫üáæ ‚Äî api@usd.uy
  </footer>

  <script>
    const apikey = "admin123";
    document.getElementById("menu-btn").addEventListener("click", () => {
      document.getElementById("mobile-menu").classList.toggle("hidden");
    });

    async function convertCurrency() {
      const amount = document.getElementById('amount').value;
      const from = document.getElementById('from').value;
      const to = document.getElementById('to').value;
      const source = document.getElementById('source').value;
      const out = document.getElementById('convert-output');

      out.textContent = 'Cargando...';
      try {
        const res = await fetch(`/api/convert?amount=${amount}&from=${from}&to=${to}&source=${source}&apikey=${apikey}`);
        out.textContent = JSON.stringify(await res.json(), null, 2);
      } catch (err) {
        out.textContent = 'Error: ' + err.message;
      }
    }

    async function fetchBanco() {
      const banco = document.getElementById('banco').value;
      const out = document.getElementById('banco-output');
      out.textContent = 'Cargando...';

      try {
        const res = await fetch(`/api/currency/${banco}?apikey=${apikey}`);
        out.textContent = JSON.stringify(await res.json(), null, 2);
      } catch (err) {
        out.textContent = 'Error: ' + err.message;
      }
    }

    async function fetchFuel() {
      const fuel = document.getElementById('fuel').value;
      const out = document.getElementById('fuel-output');
      out.textContent = 'Cargando...';

      try {
        const res = await fetch(`/api/fuel?apikey=${apikey}`);
        const data = await res.json();
        out.textContent = JSON.stringify(data[fuel], null, 2);
      } catch (err) {
        out.textContent = 'Error: ' + err.message;
      }
    }
  </script>
</body>
</html>
